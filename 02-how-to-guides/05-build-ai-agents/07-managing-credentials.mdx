---
title: 'Managing Secrets and Credentials'
description: 'Learn secure patterns for handling credentials, API keys, and sensitive data in your AskUI automation projects'
---

Proper credential management is crucial for security and maintainability in automation projects. This guide covers best practices for handling AskUI credentials, application passwords, and other sensitive data.

## Security Principles

### Never Commit Secrets

**❌ Never do this:**
```typescript
// DON'T: Hard-coded credentials in source code
const username = "admin";
const password = "secretpassword123";
const askuiToken = "ask_1234567890abcdef";
```

**✅ Always do this:**
```typescript
// DO: Use environment variables
const username = process.env.APP_USERNAME;
const password = process.env.APP_PASSWORD;
const askuiToken = process.env.ASKUI_TOKEN;
```

### Environment Variable Strategy

Use different strategies based on your environment:

- **Development**: `.env` files (git-ignored)
- **CI/CD**: Environment variables or secure stores
- **Production**: Key management services (AWS Secrets Manager, Azure Key Vault)

## Environment File Setup

### Create .env File

Create a `.env` file in your project root (ensure it's in `.gitignore`):

```bash
# .env
# AskUI Configuration
ASKUI_WORKSPACE_ID=your-workspace-id-here
ASKUI_TOKEN=your-access-token-here

# Application Credentials
APP_USERNAME=standard_user
APP_PASSWORD=secret_sauce
APP_BASE_URL=https://www.saucedemo.com

# Test User Accounts
STANDARD_USER=standard_user
LOCKED_USER=locked_user
ERROR_USER=error_user
PROBLEM_USER=problem_user
GLITCH_USER=performance_glitch_user
COMMON_PASSWORD=secret_sauce

# Database Credentials (if applicable)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=testdb
DB_USER=testuser
DB_PASSWORD=testpass123

# API Keys
THIRD_PARTY_API_KEY=your-api-key-here
PAYMENT_API_SECRET=your-payment-secret-here
```

### Create .env.example

Provide a template for other developers:

```bash
# .env.example
# AskUI Configuration
# Get these values from https://hub.askui.com
ASKUI_WORKSPACE_ID=your-workspace-id-here
ASKUI_TOKEN=your-access-token-here

# Application Credentials
APP_USERNAME=standard_user
APP_PASSWORD=secret_sauce
APP_BASE_URL=https://www.saucedemo.com

# Test User Accounts - SauceDemo Test Users
STANDARD_USER=standard_user
LOCKED_USER=locked_user
ERROR_USER=error_user
PROBLEM_USER=problem_user
GLITCH_USER=performance_glitch_user
COMMON_PASSWORD=secret_sauce

# Optional: Database Credentials
DB_HOST=localhost
DB_PORT=5432
DB_NAME=testdb
DB_USER=testuser
DB_PASSWORD=your-db-password

# Optional: Third-party API Keys
THIRD_PARTY_API_KEY=your-api-key-here
PAYMENT_API_SECRET=your-payment-secret
```

## TypeScript Configuration

### Environment Variable Types

Create type definitions for environment variables:

```typescript
// env.d.ts
declare namespace NodeJS {
    export interface ProcessEnv {
        // AskUI Configuration
        ASKUI_WORKSPACE_ID: string;
        ASKUI_TOKEN: string;
        
        // Application Configuration
        APP_USERNAME: string;
        APP_PASSWORD: string;
        APP_BASE_URL: string;
        
        // Test Users
        STANDARD_USER: string;
        LOCKED_USER: string;
        ERROR_USER: string;
        PROBLEM_USER: string;
        GLITCH_USER: string;
        COMMON_PASSWORD: string;
        
        // Optional Environment Variables
        DB_HOST?: string;
        DB_PORT?: string;
        DB_NAME?: string;
        DB_USER?: string;
        DB_PASSWORD?: string;
        
        THIRD_PARTY_API_KEY?: string;
        PAYMENT_API_SECRET?: string;
        
        // Test Configuration
        TEST_TIMEOUT?: string;
        HEADLESS?: string;
        BROWSER_TYPE?: string;
    }
}
```

### Credential Validation

Create a utility to validate required environment variables:

```typescript
// src/utils/env-validator.ts
interface RequiredEnvVars {
    [key: string]: string | undefined;
}

export class EnvironmentValidator {
    private static requiredVars: string[] = [
        'ASKUI_WORKSPACE_ID',
        'ASKUI_TOKEN',
        'APP_USERNAME',
        'APP_PASSWORD',
        'COMMON_PASSWORD'
    ];

    static validate(): void {
        const missing: string[] = [];
        
        for (const varName of this.requiredVars) {
            if (!process.env[varName]) {
                missing.push(varName);
            }
        }

        if (missing.length > 0) {
            throw new Error(
                `Missing required environment variables:\n${missing.join('\n')}\n\n` +
                `Please check your .env file or environment configuration.`
            );
        }
    }

    static get(varName: string, defaultValue?: string): string {
        const value = process.env[varName];
        
        if (!value && !defaultValue) {
            throw new Error(`Environment variable ${varName} is required but not set`);
        }
        
        return value || defaultValue!;
    }

    static getBoolean(varName: string, defaultValue: boolean = false): boolean {
        const value = process.env[varName];
        if (!value) return defaultValue;
        
        return value.toLowerCase() === 'true';
    }

    static getNumber(varName: string, defaultValue?: number): number {
        const value = process.env[varName];
        if (!value && defaultValue === undefined) {
            throw new Error(`Environment variable ${varName} is required but not set`);
        }
        
        const parsed = parseInt(value || String(defaultValue));
        if (isNaN(parsed)) {
            throw new Error(`Environment variable ${varName} must be a valid number`);
        }
        
        return parsed;
    }
}
```

## Credential Management Patterns

### Configuration Class

Create a centralized configuration management class:

```typescript
// src/config/app-config.ts
import { EnvironmentValidator } from '../utils/env-validator';

export class AppConfig {
    // Validate environment on class initialization
    static {
        EnvironmentValidator.validate();
    }

    // AskUI Configuration
    static readonly ASKUI = {
        workspaceId: EnvironmentValidator.get('ASKUI_WORKSPACE_ID'),
        token: EnvironmentValidator.get('ASKUI_TOKEN')
    };

    // Application URLs
    static readonly URLS = {
        base: EnvironmentValidator.get('APP_BASE_URL', 'https://www.saucedemo.com'),
        login: `${this.URLS.base}/`,
        inventory: `${this.URLS.base}/inventory.html`,
        cart: `${this.URLS.base}/cart.html`
    };

    // Test Users
    static readonly USERS = {
        standard: {
            username: EnvironmentValidator.get('STANDARD_USER'),
            password: EnvironmentValidator.get('COMMON_PASSWORD')
        },
        locked: {
            username: EnvironmentValidator.get('LOCKED_USER'),
            password: EnvironmentValidator.get('COMMON_PASSWORD')
        },
        error: {
            username: EnvironmentValidator.get('ERROR_USER'),
            password: EnvironmentValidator.get('COMMON_PASSWORD')
        },
        problem: {
            username: EnvironmentValidator.get('PROBLEM_USER'),
            password: EnvironmentValidator.get('COMMON_PASSWORD')
        },
        glitch: {
            username: EnvironmentValidator.get('GLITCH_USER'),
            password: EnvironmentValidator.get('COMMON_PASSWORD')
        }
    };

    // Test Configuration
    static readonly TEST = {
        timeout: EnvironmentValidator.getNumber('TEST_TIMEOUT', 30000),
        headless: EnvironmentValidator.getBoolean('HEADLESS', false),
        browserType: EnvironmentValidator.get('BROWSER_TYPE', 'chrome')
    };

    // Optional: Database Configuration
    static readonly DATABASE = {
        host: process.env.DB_HOST,
        port: process.env.DB_PORT ? parseInt(process.env.DB_PORT) : undefined,
        name: process.env.DB_NAME,
        user: process.env.DB_USER,
        password: process.env.DB_PASSWORD,
        
        get isConfigured(): boolean {
            return !!(this.host && this.port && this.name && this.user && this.password);
        }
    };
}
```

### Secure Credential Access

Use the configuration class in your tests and page objects:

```typescript
// tests/login.test.ts
import { AppConfig } from '../src/config/app-config';
import { LoginPage } from '../src/pages/login-page';

describe('Login Tests', () => {
    let loginPage: LoginPage;

    beforeEach(async () => {
        loginPage = new LoginPage();
        await loginPage.navigate();
    });

    it('should login with standard user', async () => {
        const user = AppConfig.USERS.standard;
        
        await loginPage.login(user.username, user.password);
        await expect(loginPage.isLoginSuccessful()).resolves.toBe(true);
    });

    it('should handle locked user', async () => {
        const user = AppConfig.USERS.locked;
        
        await loginPage.login(user.username, user.password);
        
        const errorMessage = await loginPage.getErrorMessage();
        expect(errorMessage).toContain('locked out');
    });
});
```

## Multiple Environment Support

### Environment-Specific Configuration

Support different environments (dev, staging, production):

```typescript
// src/config/environment.ts
export type Environment = 'development' | 'staging' | 'production' | 'test';

export class EnvironmentConfig {
    static readonly CURRENT: Environment = (process.env.NODE_ENV as Environment) || 'development';

    static readonly CONFIGS = {
        development: {
            baseUrl: 'https://dev.saucedemo.com',
            timeout: 10000,
            retries: 1
        },
        staging: {
            baseUrl: 'https://staging.saucedemo.com',
            timeout: 15000,
            retries: 2
        },
        production: {
            baseUrl: 'https://www.saucedemo.com',
            timeout: 30000,
            retries: 3
        },
        test: {
            baseUrl: 'https://test.saucedemo.com',
            timeout: 5000,
            retries: 0
        }
    };

    static get current() {
        return this.CONFIGS[this.CURRENT];
    }

    static isDevelopment(): boolean {
        return this.CURRENT === 'development';
    }

    static isProduction(): boolean {
        return this.CURRENT === 'production';
    }

    static isTest(): boolean {
        return this.CURRENT === 'test';
    }
}
```

### Environment-Specific .env Files

Use different .env files for different environments:

```
.env                    # Default/development
.env.local             # Local overrides (git-ignored)
.env.staging           # Staging environment
.env.production        # Production environment
.env.test              # Test environment
```

Load appropriate environment file in your setup:

```typescript
// src/setup/env-setup.ts
import * as dotenv from 'dotenv';
import * as path from 'path';

const environment = process.env.NODE_ENV || 'development';

// Load environment-specific file first, then default .env
dotenv.config({ path: path.resolve(process.cwd(), `.env.${environment}`) });
dotenv.config({ path: path.resolve(process.cwd(), '.env') });
dotenv.config({ path: path.resolve(process.cwd(), '.env.local') });
```

## CI/CD Integration

### GitHub Actions

```yaml
# .github/workflows/test.yml
name: Test Suite

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          
      - name: Install dependencies
        run: npm ci
        
      - name: Run tests
        env:
          ASKUI_WORKSPACE_ID: ${{ secrets.ASKUI_WORKSPACE_ID }}
          ASKUI_TOKEN: ${{ secrets.ASKUI_TOKEN }}
          STANDARD_USER: standard_user
          COMMON_PASSWORD: secret_sauce
          NODE_ENV: test
        run: npm test
```

### GitLab CI

```yaml
# .gitlab-ci.yml
test:
  stage: test
  script:
    - npm ci
    - npm test
  variables:
    NODE_ENV: "test"
    STANDARD_USER: "standard_user"
    COMMON_PASSWORD: "secret_sauce"
  secrets:
    ASKUI_WORKSPACE_ID:
      vault: "askui/workspace_id"
    ASKUI_TOKEN:
      vault: "askui/token"
```

## Security Best Practices

### Access Control

Implement role-based access to credentials:

```typescript
// src/utils/credential-manager.ts
export class CredentialManager {
    private static readonly ADMIN_USERS = ['admin', 'super_admin'];
    private static readonly REGULAR_USERS = ['standard_user', 'test_user'];

    static getCredentials(userType: 'admin' | 'regular' | 'locked'): { username: string; password: string } {
        switch (userType) {
            case 'admin':
                return {
                    username: EnvironmentValidator.get('ADMIN_USER'),
                    password: EnvironmentValidator.get('ADMIN_PASSWORD')
                };
            case 'regular':
                return {
                    username: EnvironmentValidator.get('STANDARD_USER'),
                    password: EnvironmentValidator.get('COMMON_PASSWORD')
                };
            case 'locked':
                return {
                    username: EnvironmentValidator.get('LOCKED_USER'),
                    password: EnvironmentValidator.get('COMMON_PASSWORD')
                };
            default:
                throw new Error(`Unknown user type: ${userType}`);
        }
    }

    static maskSensitiveData(data: any): any {
        const sensitive = ['password', 'token', 'key', 'secret', 'auth'];
        const masked = { ...data };

        for (const [key, value] of Object.entries(masked)) {
            if (sensitive.some(s => key.toLowerCase().includes(s))) {
                masked[key] = '***MASKED***';
            }
        }

        return masked;
    }
}
```

### Credential Rotation

Implement credential rotation support:

```typescript
// src/utils/credential-rotator.ts
export class CredentialRotator {
    private static readonly ROTATION_INTERVAL = 24 * 60 * 60 * 1000; // 24 hours

    static shouldRotate(lastRotation: number): boolean {
        return Date.now() - lastRotation > this.ROTATION_INTERVAL;
    }

    static async rotateApiKey(): Promise<string> {
        // Implementation would depend on your API provider
        // This is a placeholder for the rotation logic
        const newKey = await this.fetchNewApiKey();
        await this.updateEnvironmentVariable('API_KEY', newKey);
        return newKey;
    }

    private static async fetchNewApiKey(): Promise<string> {
        // Placeholder for actual API key rotation
        return 'new-rotated-key';
    }

    private static async updateEnvironmentVariable(key: string, value: string): Promise<void> {
        // In production, this would update your key management system
        process.env[key] = value;
    }
}
```

<Card title="Complete Credential Management Example" icon="github" href="https://github.com/askui/AskUI-Best-Practices">
  See a full implementation of secure credential management patterns in our example repository, including environment validation and configuration management.
</Card>

## Next Steps

- Learn about [running and debugging tests](/02-how-to-guides/05-build-ai-agents/08-running-and-debugging-tests)
- Explore [project structure best practices](/03-explanation/02-best-practices/07-project-structure)
- Set up [IDE configuration](/02-how-to-guides/02-integrations/10-ide-setup) for development